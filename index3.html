<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mental Health Awareness Portal</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script type="module">
    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";
    window.GoogleGenerativeAI = GoogleGenerativeAI;
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

</head>
<body>
  <nav class="navbar">
    <div class="nav-left">
        <img src="logo1.png" alt="Mind Care Portal Logo" class="logo-img" />
        <span class="nav-logo-text">Mind Care Portal</span>
    </div>
    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <label for="nav-toggle" class="nav-toggle-label">
        <span></span>
        <span></span>
        <span></span>
    </label>
    <ul class="nav-links">
        <li>
          <a href="index.html">
            <i class="fas fa-home"></i> 
            <div>Home</div>
          </a>
        </li>
        <li>
          <a href="index2.html">
            <i class="fas fa-tasks"></i> 
            <div>Quiz</div>
          </a>
        </li>
        <li>
            <a href="#info">
                <i class="fas fa-info-circle"></i>
                <div>Info</div>
            </a>
        </li>
        <li>
            <a href="#graph-section-1">
                <i class="fa-solid fa-chart-line"></i>
                <div>Stats</div>
            </a>
        </li>
        <li>
            <a href="#stories">
                <i class="fa-solid fa-book-open"></i>
                <div>Stories</div>
            </a>
        </li>
        <li>
            <a href="#gemini-chat-section">
                <i class="fa-solid fa-robot"></i>
                <div>AI Chat</div>
            </a>
        </li>
    </ul>
  </nav>

  <!-- Quiz Summary Section (Hidden by default, shown by script.js) -->
  <section id="quiz-summary-container" class="summary-section-wrapper animate">
    <!-- Quiz summary content will be injected here by JavaScript -->
  </section>

  <!-- Info Section: Common Mental Health Disorders -->
  <section id="info" class="animate">
    <h2>Common Mental Health Disorders</h2>
    <div class="disorder-list">
      <!-- Disorder cards will be loaded here by script.js -->
    </div>
  </section>

  <!-- Stats Section -->
  <section id="graph-section-1" class="animate">
    <h2>Mental Health Statistics</h2>
    <div class="stats-container">
      <div class="stats-section">
        <div class="chart-header">
          <h3>Global Prevalence by Gender</h3>
          <button class="maximize-chart-btn" data-chart-id="prevalenceChart"><i class="fas fa-expand"></i></button>
        </div>
        <canvas id="prevalenceChart"></canvas>
      </div>
      <div class="stats-section">
        <div class="chart-header">
          <h3>Diagnoses Over the Years</h3>
          <button class="maximize-chart-btn" data-chart-id="diagnosisChart"><i class="fas fa-expand"></i></button>
        </div>
        <canvas id="diagnosisChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Stories Section -->
  <section id="stories" class="animate">
    <h2>Inspirational Stories</h2>
    <div class="story-list">
      <!-- Story cards will be loaded here by script.js -->
    </div>
    <div class="write-story animate">
      <h3>Share Your Story</h3>
      <p class="story-intro-text">Your experiences can inspire and help others. Share your journey with mental well-being here. Your story is saved only in your browser.</p>
      <textarea id="yourStory" placeholder="Write your story here..."></textarea>
      <button id="saveStoryBtn">Save My Story</button>
      <div id="savedMessage" class="saved-message hidden">Your story is saved safely in your browser.</div>
    </div>
  </section>

  <!-- AI Chat Section -->
  <section id="gemini-chat-section" class="ai-chat-section animate">
    <h2>Chat with AI Assistant</h2>
    <div id="gemini-response">
      <!-- Chat messages will be appended here -->
    </div>
    <div id="gemini-chat-box">
      <textarea id="gemini-input" placeholder="Type your message..."></textarea>
      <button>Send <i class="fas fa-paper-plane"></i></button>
    </div>
    <div class="chat-info-message">Your chat history is saved safely in your browser.</div>
  </section>

  <footer>
    <div>
      <img src="logo1.png" alt="Mind Care Portal Logo" class="logo-img-footer"/>
      <span>Quick Links: </span>
      <a target="_blank" href="https://en.wikipedia.org/wiki/Schizophrenia">Schizophrenia</a> |
      <a target="_blank" href="https://en.wikipedia.org/wiki/Posttraumatic_stress_disorder">PTSD</a> |
      <a target="_blank" href="https://en.wikipedia.org/wiki/Eating_disorder">Eating Disorders</a> |
      <a target="_blank" href="https://en.wikipedia.org/wiki/Obsessiveâ€“compulsive_disorder">OCD</a>
    </div>
    <small>&copy; 2025 Mind Care Portal</small>
  </footer>

  <!-- Modal Structure for Stories and Disorders -->
  <div id="storyModal" class="modal-overlay hidden">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h3 id="modalStoryTitle"></h3>
      <p id="modalStoryContent"></p>
      <span id="modalStoryAuthor"></span>
      <div id="modalDisorderLinkContainer" style="display: none;">
        <a id="modalDisorderLink" href="#" target="_blank" class="read-more-btn">Learn More on Wikipedia</a>
      </div>
    </div>
  </div>

  <!-- NEW Modal Structure for Charts -->
  <div id="chartModal" class="modal-overlay hidden">
    <div class="modal-content chart-modal-content">
      <span class="close-button chart-close-button">&times;</span>
      <h3 id="modalChartTitle"></h3>
      <div class="chart-canvas-container">
        <canvas id="maximizedChartCanvas"></canvas>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <!-- Script for index.html to redirect to index2.html on Get Started button click -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const getStartedButton = document.getElementById('getStartedBtn');
        if (getStartedButton) {
            getStartedButton.addEventListener('click', function() {
                window.location.href = 'index2.html';
            });
        }
    });
  </script>
</body>
</html>
